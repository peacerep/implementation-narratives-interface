{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { useRoute } from 'vue-router';\nimport trackerHeader from '@/components/trackerHeader.vue';\nimport trackerFooter from '@/components/trackerFooter.vue';\nimport agtInfo from '@/components/agtInfo.vue';\nimport topicList from '@/components/topicList.vue';\nimport provisionSec from '@/components/provisionSec.vue';\n\n// 导入数据\nimport countries from '@/data/countries.json';\nexport default {\n  components: {\n    trackerHeader,\n    trackerFooter,\n    agtInfo,\n    topicList,\n    provisionSec\n  },\n  data() {\n    return {\n      displayedTopic: 'empty',\n      topicProvisionCounter: 100000,\n      selectedProvisions: 0\n    };\n  },\n  // 默认topic\n  created() {\n    this.displayedTopic = this.provisionList[1].topic;\n    console.log(this.provisionList[1].topic);\n    let subProvisionCounter = 0;\n    let tmpArr = [];\n    for (let item of this.provisionList) {\n      if (this.displayedTopic == item.topic) {\n        subProvisionCounter = item.provisions.length;\n        // console.log('shortlist', subProvisionCounter)\n        tmpArr = item.provisions;\n        console.log(tmpArr);\n      }\n    }\n    this.topicProvisionCounter = subProvisionCounter;\n    this.selectedProvisions = tmpArr;\n  },\n  methods: {\n    changeTopic(topic) {\n      this.displayedTopic = topic;\n      // console.log(this.displayedTopic, 'SELECTED')\n\n      let subProvisionCounter = 0;\n      let tmpArr = [];\n      for (let item of this.provisionList) {\n        if (this.displayedTopic == item.topic) {\n          subProvisionCounter = item.provisions.length;\n          // console.log('shortlist', subProvisionCounter)\n          tmpArr = item.provisions;\n          console.log(tmpArr);\n        }\n      }\n      this.topicProvisionCounter = subProvisionCounter;\n      this.selectedProvisions = tmpArr;\n      console.log('show-tmp', tmpArr);\n      console.log('show-data', this.selectedProvisions);\n    }\n  },\n  setup() {\n    //传入agreement和country\n    const $route = useRoute();\n    let agtName = $route.query.agtName;\n    let countryName = $route.query.title;\n    let agtDate = $route.query.agtDate;\n\n    // console.log(agtDate)\n\n    let data = {};\n    let provisionList = [];\n\n    //初始化本页需要的数据\n    for (let country of countries.countries) {\n      if (country.name == countryName) {\n        data = country;\n        for (let item of data.topics) {\n          let topicName = item.text;\n          for (let agt of item.agreements) {\n            if (agtName == agt.name) {\n              provisionList.push({\n                topic: topicName,\n                provisions: agt.provisions\n              });\n            }\n          }\n        }\n      }\n    }\n    // console.log(provisionList)\n\n    //本页显示内容\n    let provisionCounter = 0;\n    let reportCounter = 0;\n    let reportList = [];\n    let agtTopicList = [];\n\n    //count all the provisions\n    for (let topic of provisionList) {\n      // console.log('topic',topic.topic)\n      agtTopicList.push(topic.topic);\n      for (let provision of topic.provisions) {\n        provisionCounter++;\n        // console.log(provision.reports)\n        for (let report of provision.reports) {\n          if (reportList.includes(report.id) == false) {\n            reportList.push(report.id);\n            reportCounter++;\n          }\n        }\n      }\n    }\n    return {\n      agtName,\n      agtDate,\n      countryName,\n      provisionList,\n      provisionCounter,\n      reportCounter,\n      agtTopicList\n    };\n  }\n};","map":{"version":3,"mappings":";AAyBA,SAASA,QAAO,QAAS,YAAW;AAEpC,OAAOC,aAAY,MAAO,gCAA+B;AACzD,OAAOC,aAAY,MAAO,gCAA+B;AACzD,OAAOC,OAAM,MAAO,0BAAyB;AAC7C,OAAOC,SAAQ,MAAO,4BAA2B;AACjD,OAAOC,YAAW,MAAO,+BAA8B;;AAEvD;AACA,OAAOC,SAAQ,MAAO,uBAAsB;AAE5C,eAAgB;EACZC,UAAU,EAAE;IACRN,aAAa;IAAEC,aAAa;IAAEC,OAAO;IAAEC,SAAS;IAAEC;EACtD,CAAC;EAEDG,IAAI,GAAG;IACH,OAAM;MACFC,cAAc,EAAE,OAAO;MACvBC,qBAAqB,EAAE,MAAM;MAC7BC,kBAAkB,EAAE;IACxB;EACJ,CAAC;EAED;EACAC,OAAO,GAAG;IACN,IAAI,CAACH,cAAa,GAAI,IAAI,CAACI,aAAa,CAAC,CAAC,CAAC,CAACC,KAAI;IAChDC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACH,aAAa,CAAC,CAAC,CAAC,CAACC,KAAK;IAEvC,IAAIG,mBAAkB,GAAI;IACtB,IAAIC,MAAK,GAAI,EAAC;IAEd,KAAK,IAAIC,IAAG,IAAK,IAAI,CAACN,aAAa,EAAE;MACjC,IAAI,IAAI,CAACJ,cAAa,IAAKU,IAAI,CAACL,KAAK,EAAE;QACnCG,mBAAkB,GAAIE,IAAI,CAACC,UAAU,CAACC,MAAK;QAC3C;QACAH,MAAK,GAAIC,IAAI,CAACC,UAAS;QACvBL,OAAO,CAACC,GAAG,CAACE,MAAM;MACtB;IACJ;IACA,IAAI,CAACR,qBAAoB,GAAIO,mBAAkB;IAC/C,IAAI,CAACN,kBAAiB,GAAIO,MAAK;EACvC,CAAC;EAEDI,OAAO,EAAE;IACLC,WAAW,CAACT,KAAK,EAAE;MACf,IAAI,CAACL,cAAa,GAAIK,KAAI;MAC1B;;MAEA,IAAIG,mBAAkB,GAAI;MAC1B,IAAIC,MAAK,GAAI,EAAC;MAEd,KAAK,IAAIC,IAAG,IAAK,IAAI,CAACN,aAAa,EAAE;QACjC,IAAI,IAAI,CAACJ,cAAa,IAAKU,IAAI,CAACL,KAAK,EAAE;UACnCG,mBAAkB,GAAIE,IAAI,CAACC,UAAU,CAACC,MAAK;UAC3C;UACAH,MAAK,GAAIC,IAAI,CAACC,UAAS;UACvBL,OAAO,CAACC,GAAG,CAACE,MAAM;QACtB;MACJ;MACA,IAAI,CAACR,qBAAoB,GAAIO,mBAAkB;MAC/C,IAAI,CAACN,kBAAiB,GAAIO,MAAK;MAE/BH,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEE,MAAM;MAC9BH,OAAO,CAACC,GAAG,CAAC,WAAW,EAAC,IAAI,CAACL,kBAAkB;IACnD;EACJ,CAAC;EAEDa,KAAK,GAAG;IACJ;IACA,MAAMC,MAAK,GAAIzB,QAAQ,EAAC;IACxB,IAAI0B,OAAM,GAAID,MAAM,CAACE,KAAK,CAACD,OAAM;IACjC,IAAIE,WAAU,GAAIH,MAAM,CAACE,KAAK,CAACE,KAAI;IACnC,IAAIC,OAAM,GAAIL,MAAM,CAACE,KAAK,CAACG,OAAM;;IAEjC;;IAEA,IAAItB,IAAG,GAAI,CAAC;IACZ,IAAIK,aAAY,GAAI,EAAC;;IAErB;IACA,KAAK,IAAIkB,OAAM,IAAKzB,SAAS,CAACA,SAAS,EAAE;MACrC,IAAIyB,OAAO,CAACC,IAAG,IAAKJ,WAAW,EAAE;QAC7BpB,IAAG,GAAIuB,OAAM;QACb,KAAK,IAAIZ,IAAG,IAAKX,IAAI,CAACyB,MAAM,EAAE;UAC1B,IAAIC,SAAQ,GAAIf,IAAI,CAACgB,IAAG;UACxB,KAAK,IAAIC,GAAE,IAAKjB,IAAI,CAACkB,UAAU,EAAE;YAC7B,IAAKX,OAAM,IAAKU,GAAG,CAACJ,IAAG,EAAI;cACvBnB,aAAa,CAACyB,IAAI,CAAC;gBAACxB,KAAK,EAAEoB,SAAS;gBAAEd,UAAU,EAAEgB,GAAG,CAAChB;cAAU,CAAC;YACrE;UACJ;QACJ;MACJ;IACJ;IACA;;IAEA;IACA,IAAImB,gBAAe,GAAI;IACvB,IAAIC,aAAY,GAAI;IACpB,IAAIC,UAAS,GAAI,EAAC;IAClB,IAAIC,YAAW,GAAI,EAAC;;IAEpB;IACA,KAAK,IAAI5B,KAAI,IAAKD,aAAa,EAAE;MAC7B;MACA6B,YAAY,CAACJ,IAAI,CAACxB,KAAK,CAACA,KAAK;MAC7B,KAAK,IAAI6B,SAAQ,IAAK7B,KAAK,CAACM,UAAU,EAAC;QACnCmB,gBAAgB,EAAC;QACjB;QACA,KAAK,IAAIK,MAAK,IAAKD,SAAS,CAACE,OAAO,EAAE;UAClC,IAAIJ,UAAU,CAACK,QAAQ,CAACF,MAAM,CAACG,EAAE,KAAK,KAAK,EAAC;YACxCN,UAAU,CAACH,IAAI,CAACM,MAAM,CAACG,EAAE;YACzBP,aAAa,EAAC;UAClB;QACJ;MAEJ;IACJ;IAIA,OAAO;MACHd,OAAO;MAACI,OAAO;MAAEF,WAAW;MAAEf,aAAa;MAAC0B,gBAAgB;MAAEC,aAAa;MAAEE;IACjF;EACJ;AACJ,CAAC","names":["useRoute","trackerHeader","trackerFooter","agtInfo","topicList","provisionSec","countries","components","data","displayedTopic","topicProvisionCounter","selectedProvisions","created","provisionList","topic","console","log","subProvisionCounter","tmpArr","item","provisions","length","methods","changeTopic","setup","$route","agtName","query","countryName","title","agtDate","country","name","topics","topicName","text","agt","agreements","push","provisionCounter","reportCounter","reportList","agtTopicList","provision","report","reports","includes","id"],"sourceRoot":"","sources":["C:\\OneDrive\\Implementation Report Interface\\implementation-tracker-vue\\implementation-tracker\\src\\views\\AgtView.vue"],"sourcesContent":["<template>\r\n    <trackerHeader />\r\n\r\n    <p class=\"country-title\">{{ this.countryName }}</p>\r\n    <h1>{{ this.agtName }}</h1>\r\n\r\n    <agtInfo \r\n        :provisionCounter=\"this.provisionCounter\"\r\n        :reportCounter=\"this.reportCounter\"\r\n        :agtDate=\"this.agtDate\" />\r\n\r\n    <topicList\r\n        :agtTopicList=\"agtTopicList\"\r\n        @changeTopic=\"changeTopic\" />\r\n        <!-- @tmp=\"tmp\" /> -->\r\n\r\n    <provisionSec\r\n        :displayedTopic=\"displayedTopic\"\r\n        :topicProvisionCounter=\"topicProvisionCounter\"\r\n        :selectedProvisions=\"selectedProvisions\" />\r\n\r\n    <trackerFooter />\r\n</template>\r\n\r\n<script>\r\nimport { useRoute } from 'vue-router'\r\n\r\nimport trackerHeader from '@/components/trackerHeader.vue'\r\nimport trackerFooter from '@/components/trackerFooter.vue'\r\nimport agtInfo from '@/components/agtInfo.vue'\r\nimport topicList from '@/components/topicList.vue'\r\nimport provisionSec from '@/components/provisionSec.vue'\r\n\r\n// 导入数据\r\nimport countries from '@/data/countries.json'\r\n\r\nexport default ({\r\n    components: {\r\n        trackerHeader, trackerFooter, agtInfo, topicList, provisionSec\r\n    },\r\n\r\n    data() {\r\n        return{\r\n            displayedTopic: 'empty',\r\n            topicProvisionCounter: 100000,\r\n            selectedProvisions: 0\r\n        }\r\n    },\r\n\r\n    // 默认topic\r\n    created() {\r\n        this.displayedTopic = this.provisionList[1].topic\r\n        console.log(this.provisionList[1].topic)\r\n\r\n        let subProvisionCounter = 0\r\n            let tmpArr = []\r\n\r\n            for (let item of this.provisionList) {\r\n                if (this.displayedTopic == item.topic) {\r\n                    subProvisionCounter = item.provisions.length\r\n                    // console.log('shortlist', subProvisionCounter)\r\n                    tmpArr = item.provisions\r\n                    console.log(tmpArr)\r\n                }\r\n            }\r\n            this.topicProvisionCounter = subProvisionCounter\r\n            this.selectedProvisions = tmpArr\r\n    },\r\n\r\n    methods: {\r\n        changeTopic(topic) {\r\n            this.displayedTopic = topic\r\n            // console.log(this.displayedTopic, 'SELECTED')\r\n\r\n            let subProvisionCounter = 0\r\n            let tmpArr = []\r\n\r\n            for (let item of this.provisionList) {\r\n                if (this.displayedTopic == item.topic) {\r\n                    subProvisionCounter = item.provisions.length\r\n                    // console.log('shortlist', subProvisionCounter)\r\n                    tmpArr = item.provisions\r\n                    console.log(tmpArr)\r\n                }\r\n            }\r\n            this.topicProvisionCounter = subProvisionCounter\r\n            this.selectedProvisions = tmpArr\r\n\r\n            console.log('show-tmp', tmpArr)\r\n            console.log('show-data',this.selectedProvisions)\r\n        }\r\n    },\r\n\r\n    setup() {\r\n        //传入agreement和country\r\n        const $route = useRoute()\r\n        let agtName = $route.query.agtName\r\n        let countryName = $route.query.title\r\n        let agtDate = $route.query.agtDate\r\n\r\n        // console.log(agtDate)\r\n\r\n        let data = {}\r\n        let provisionList = []\r\n\r\n        //初始化本页需要的数据\r\n        for (let country of countries.countries) {\r\n            if (country.name == countryName) {\r\n                data = country\r\n                for (let item of data.topics) {\r\n                    let topicName = item.text\r\n                    for (let agt of item.agreements) {\r\n                        if ( agtName == agt.name ) {\r\n                            provisionList.push({topic: topicName, provisions: agt.provisions})\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // console.log(provisionList)\r\n\r\n        //本页显示内容\r\n        let provisionCounter = 0\r\n        let reportCounter = 0\r\n        let reportList = []\r\n        let agtTopicList = []\r\n\r\n        //count all the provisions\r\n        for (let topic of provisionList) {\r\n            // console.log('topic',topic.topic)\r\n            agtTopicList.push(topic.topic)\r\n            for (let provision of topic.provisions){\r\n                provisionCounter++\r\n                // console.log(provision.reports)\r\n                for (let report of provision.reports) {\r\n                    if (reportList.includes(report.id) == false){\r\n                        reportList.push(report.id)\r\n                        reportCounter++\r\n                    }\r\n                }\r\n                \r\n            }    \r\n        }\r\n\r\n        \r\n\r\n        return {\r\n            agtName,agtDate, countryName, provisionList,provisionCounter, reportCounter, agtTopicList\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n\r\nh1 {\r\n    font-size: 36px;\r\n    margin: 0px 200px 0px 200px;\r\n}\r\n\r\n.country-title {\r\n    font-size: 20px;\r\n    font-weight: medium;\r\n    text-align: center;\r\n    margin-top: 40px;\r\n    padding: 0px 0px;\r\n}\r\n\r\n</style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}