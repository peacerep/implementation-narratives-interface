{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-8750b3ee\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"country-title\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_trackerHeader = _resolveComponent(\"trackerHeader\");\n  const _component_agtInfo = _resolveComponent(\"agtInfo\");\n  const _component_topicList = _resolveComponent(\"topicList\");\n  const _component_provisionSec = _resolveComponent(\"provisionSec\");\n  const _component_trackerFooter = _resolveComponent(\"trackerFooter\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_trackerHeader), _createElementVNode(\"p\", _hoisted_1, _toDisplayString(this.countryName), 1 /* TEXT */), _createElementVNode(\"h1\", null, _toDisplayString(this.agtName), 1 /* TEXT */), _createVNode(_component_agtInfo, {\n    provisionCounter: this.provisionCounter,\n    reportCounter: this.reportCounter,\n    agtDate: this.agtDate\n  }, null, 8 /* PROPS */, [\"provisionCounter\", \"reportCounter\", \"agtDate\"]), _createVNode(_component_topicList, {\n    agtTopicList: $setup.agtTopicList,\n    onChangeTopic: $options.changeTopic\n  }, null, 8 /* PROPS */, [\"agtTopicList\", \"onChangeTopic\"]), _createCommentVNode(\" @tmp=\\\"tmp\\\" /> \"), _createVNode(_component_provisionSec, {\n    displayedTopic: $data.displayedTopic,\n    topicProvisionCounter: $data.topicProvisionCounter\n  }, null, 8 /* PROPS */, [\"displayedTopic\", \"topicProvisionCounter\"]), _createVNode(_component_trackerFooter)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"mappings":";;;EAGOA,KAAK,EAAC;AAAe;;;;;;;6DAFxBC,aAAiBC,2BAEjBC,oBAAmD,KAAnDC,UAAmD,wBAAlBC,WAAW,kBAC5CF,oBAA2B,kCAAfG,OAAO,kBAEnBL,aAG8BM;IAFzBC,gBAAgB,OAAOA,gBAAgB;IACvCC,aAAa,OAAOA,aAAa;IACjCC,OAAO,OAAOA;6EAEnBT,aAEiCU;IAD5BC,YAAY,EAAEC,mBAAY;IAC1BC,aAAW,EAAEC;8DACdC,wCAAsB,EAE1Bf,aAEqDgB;IADhDC,cAAc,EAAEC,oBAAc;IAC9BC,qBAAqB,EAAED;wEAE5BlB,aAAiBoB","names":["class","_createVNode","_component_trackerHeader","_createElementVNode","_hoisted_1","countryName","agtName","_component_agtInfo","provisionCounter","reportCounter","agtDate","_component_topicList","agtTopicList","$setup","onChangeTopic","$options","_createCommentVNode","_component_provisionSec","displayedTopic","$data","topicProvisionCounter","_component_trackerFooter"],"sourceRoot":"","sources":["C:\\OneDrive\\Implementation Report Interface\\implementation-tracker-vue\\implementation-tracker\\src\\views\\AgtView.vue"],"sourcesContent":["<template>\r\n    <trackerHeader />\r\n\r\n    <p class=\"country-title\">{{ this.countryName }}</p>\r\n    <h1>{{ this.agtName }}</h1>\r\n\r\n    <agtInfo \r\n        :provisionCounter=\"this.provisionCounter\"\r\n        :reportCounter=\"this.reportCounter\"\r\n        :agtDate=\"this.agtDate\" />\r\n\r\n    <topicList\r\n        :agtTopicList=\"agtTopicList\"\r\n        @changeTopic=\"changeTopic\" />\r\n        <!-- @tmp=\"tmp\" /> -->\r\n\r\n    <provisionSec\r\n        :displayedTopic=\"displayedTopic\"\r\n        :topicProvisionCounter=\"topicProvisionCounter\" />\r\n\r\n    <trackerFooter />\r\n</template>\r\n\r\n<script>\r\nimport { useRoute } from 'vue-router'\r\n\r\nimport trackerHeader from '@/components/trackerHeader.vue'\r\nimport trackerFooter from '@/components/trackerFooter.vue'\r\nimport agtInfo from '@/components/agtInfo.vue'\r\nimport topicList from '@/components/topicList.vue'\r\nimport provisionSec from '@/components/provisionSec.vue'\r\n\r\n// 导入数据\r\nimport countries from '@/data/countries.json'\r\n\r\nexport default ({\r\n    components: {\r\n        trackerHeader, trackerFooter, agtInfo, topicList, provisionSec\r\n    },\r\n\r\n    data() {\r\n        return{\r\n            displayedTopic: 'empty',\r\n            topicProvisionCounter: 100000\r\n        }\r\n    },\r\n\r\n    // 默认topic\r\n    created() {\r\n        this.displayedTopic = this.provisionList[1].topic\r\n        console.log(this.provisionList[1].topic)\r\n\r\n        // let subProvisionCounter = 0\r\n\r\n        // for (let item of this.provisionList) {\r\n        //         if (this.displayedTopic == item.topic) {\r\n        //             subProvisionCounter = item.provisions.length\r\n        //         }\r\n        //     }\r\n\r\n        //     this.topicProvisionCounter = subProvisionCounter\r\n    },\r\n\r\n    methods: {\r\n        changeTopic(topic) {\r\n            this.displayedTopic = topic\r\n            // console.log(this.displayedTopic, 'SELECTED')\r\n\r\n            let subProvisionCounter = 0\r\n            let tmpArr = []\r\n\r\n            for (let item of this.provisionList) {\r\n                if (this.displayedTopic == item.topic) {\r\n                    subProvisionCounter = item.provisions.length\r\n                    // console.log('shortlist', subProvisionCounter)\r\n                    tmpArr = item.provisions\r\n                    console.log(tmpArr)\r\n                }\r\n            }\r\n            this.topicProvisionCounter = subProvisionCounter\r\n        }\r\n    },\r\n\r\n    setup() {\r\n        //传入agreement和country\r\n        const $route = useRoute()\r\n        let agtName = $route.query.agtName\r\n        let countryName = $route.query.title\r\n        let agtDate = $route.query.agtDate\r\n\r\n        // console.log(agtDate)\r\n\r\n        let data = {}\r\n        let provisionList = []\r\n\r\n        //初始化本页需要的数据\r\n        for (let country of countries.countries) {\r\n            if (country.name == countryName) {\r\n                data = country\r\n                for (let item of data.topics) {\r\n                    let topicName = item.text\r\n                    for (let agt of item.agreements) {\r\n                        if ( agtName == agt.name ) {\r\n                            provisionList.push({topic: topicName, provisions: agt.provisions})\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // console.log(provisionList)\r\n\r\n        //本页显示内容\r\n        let provisionCounter = 0\r\n        let reportCounter = 0\r\n        let reportList = []\r\n        let agtTopicList = []\r\n\r\n        //count all the provisions\r\n        for (let topic of provisionList) {\r\n            // console.log('topic',topic.topic)\r\n            agtTopicList.push(topic.topic)\r\n            for (let provision of topic.provisions){\r\n                provisionCounter++\r\n                // console.log(provision.reports)\r\n                for (let report of provision.reports) {\r\n                    if (reportList.includes(report.id) == false){\r\n                        reportList.push(report.id)\r\n                        reportCounter++\r\n                    }\r\n                }\r\n                \r\n            }    \r\n        }\r\n\r\n        \r\n\r\n        return {\r\n            agtName,agtDate, countryName, provisionList,provisionCounter, reportCounter, agtTopicList\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n\r\nh1 {\r\n    font-size: 36px;\r\n    margin: 0px 200px 0px 200px;\r\n}\r\n\r\n.country-title {\r\n    font-size: 20px;\r\n    font-weight: medium;\r\n    text-align: center;\r\n    margin-top: 40px;\r\n    padding: 0px 0px;\r\n}\r\n\r\n</style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}